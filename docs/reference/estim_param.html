<!-- Generated by pkgdown: do not edit by hand -->
<!DOCTYPE html>
<html lang="en">
  <head>
  <meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">

<title>main function for parameter estimation — estim_param • CroptimizR</title>

<!-- favicons -->
<link rel="icon" type="image/png" sizes="16x16" href="../favicon-16x16.png">
<link rel="icon" type="image/png" sizes="32x32" href="../favicon-32x32.png">
<link rel="apple-touch-icon" type="image/png" sizes="180x180" href="../apple-touch-icon.png" />
<link rel="apple-touch-icon" type="image/png" sizes="120x120" href="../apple-touch-icon-120x120.png" />
<link rel="apple-touch-icon" type="image/png" sizes="76x76" href="../apple-touch-icon-76x76.png" />
<link rel="apple-touch-icon" type="image/png" sizes="60x60" href="../apple-touch-icon-60x60.png" />
<!-- jquery -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js" integrity="sha256-FgpCb/KJQlLNfOu91ta32o/NMZxltwRo8QtmkMRdAu8=" crossorigin="anonymous"></script>
<!-- Bootstrap -->

<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.3.7/css/bootstrap.min.css" integrity="sha256-916EbMg70RQy9LHiGkXzG8hSg9EdNy97GazNG/aiY1w=" crossorigin="anonymous" />
<script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.3.7/js/bootstrap.min.js" integrity="sha256-U5ZEeKfGNOja007MMD3YBI0A3OSZOQbeG6z2f2Y0hu8=" crossorigin="anonymous"></script>

<!-- Font Awesome icons -->
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css" integrity="sha256-eZrrJcwDc/3uDhsdt61sL2oOBY362qM3lon1gyExkL0=" crossorigin="anonymous" />

<!-- clipboard.js -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.4/clipboard.min.js" integrity="sha256-FiZwavyI2V6+EXO1U+xzLG3IKldpiTFf3153ea9zikQ=" crossorigin="anonymous"></script>

<!-- sticky kit -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/sticky-kit/1.1.3/sticky-kit.min.js" integrity="sha256-c4Rlo1ZozqTPE2RLuvbusY3+SU1pQaJC0TjuhygMipw=" crossorigin="anonymous"></script>

<!-- pkgdown -->
<link href="../pkgdown.css" rel="stylesheet">
<script src="../pkgdown.js"></script>



<meta property="og:title" content="main function for parameter estimation — estim_param" />

<meta property="og:description" content="main function for parameter estimation" />

<meta property="og:image" content="/logo.png" />
<meta name="twitter:card" content="summary" />



<!-- mathjax -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script>

<!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]-->


  </head>

  <body>
    <div class="container template-reference-topic">
      <header>
      <div class="navbar navbar-default navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <span class="navbar-brand">
        <a class="navbar-link" href="../index.html">CroptimizR</a>
        <span class="version label label-default" data-toggle="tooltip" data-placement="bottom" title="Released version">0.2.0.9000</span>
      </span>
    </div>

    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav">
        <li>
  <a href="../index.html">
    <span class="fa fa-home fa-lg"></span>
     
  </a>
</li>
<li>
  <a href="../reference/index.html">Reference</a>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-expanded="false">
    Articles
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu">
    <li>
      <a href="../articles/ApsimX_parameter_estimation_simple_case.html">Parameter estimation with the ApsimX crop Model: a simple case</a>
    </li>
    <li>
      <a href="../articles/Available_parameter_estimation_algorithms.html">Available parameter estimation algorithms in CroptimizR</a>
    </li>
    <li>
      <a href="../articles/Designing_a_model_wrapper.html">Guidelines for implementing a crop model R wrapper for CroptimizR</a>
    </li>
    <li>
      <a href="../articles/Parameter_estimation_DREAM.html">Parameter estimation with the DREAM-zs algorithm</a>
    </li>
    <li>
      <a href="../articles/Parameter_estimation_simple_case.html">Parameter estimation with the Stics crop Model: a simple case</a>
    </li>
    <li>
      <a href="../articles/Parameter_estimation_Specific_and_Varietal.html">Parameter estimation with the Stics crop Model: a case with specific and varietal parameters</a>
    </li>
  </ul>
</li>
      </ul>
      
      <ul class="nav navbar-nav navbar-right">
        <li>
  <a href="https://github.com/SticsRPacks/CroptimizR">
    <span class="fa fa-github fa-lg"></span>
     
  </a>
</li>
      </ul>
      
    </div><!--/.nav-collapse -->
  </div><!--/.container -->
</div><!--/.navbar -->

      
      </header>

<div class="row">
  <div class="col-md-9 contents">
    <div class="page-header">
    <h1>main function for parameter estimation</h1>
    <small class="dont-index">Source: <a href='https://github.com/SticsRPacks/CroptimizR/blob/master/R/estim_param.R'><code>R/estim_param.R</code></a></small>
    <div class="hidden name"><code>estim_param.Rd</code></div>
    </div>

    <div class="ref-description">
    
    <p>main function for parameter estimation</p>
    
    </div>

    <pre class="usage"><span class='fu'>estim_param</span>(<span class='no'>obs_list</span>, <span class='kw'>crit_function</span> <span class='kw'>=</span> <span class='no'>crit_log_cwss</span>, <span class='no'>model_function</span>,
  <span class='kw'>model_options</span> <span class='kw'>=</span> <span class='kw'>NULL</span>, <span class='kw'>optim_method</span> <span class='kw'>=</span> <span class='st'>"nloptr.simplex"</span>, <span class='no'>optim_options</span>,
  <span class='no'>param_info</span>, <span class='kw'>transform_obs</span> <span class='kw'>=</span> <span class='kw'>NULL</span>, <span class='kw'>transform_sim</span> <span class='kw'>=</span> <span class='kw'>NULL</span>,
  <span class='kw'>satisfy_par_const</span> <span class='kw'>=</span> <span class='kw'>NULL</span>, <span class='kw'>var_names</span> <span class='kw'>=</span> <span class='kw'>NULL</span>)</pre>
    
    <h2 class="hasAnchor" id="arguments"><a class="anchor" href="#arguments"></a>Arguments</h2>
    <table class="ref-arguments">
    <colgroup><col class="name" /><col class="desc" /></colgroup>
    <tr>
      <th>obs_list</th>
      <td><p>List of observed values to use for parameter estimation
A <code>named list</code> (names = situations names) of data.frame containing
one column named Date with the dates (Date or POSIXct format) of the different observations
and one column per observed variables with either the measured values or NA, if
the variable is not observed at the given date.</p></td>
    </tr>
    <tr>
      <th>crit_function</th>
      <td><p>Function implementing the criterion to optimize
(optional, see default value in the function signature). See
<a href='https://sticsrpacks.github.io/CroptimizR/reference/ls_criteria.html'>here</a>
for more details about the list of proposed criterion.</p></td>
    </tr>
    <tr>
      <th>model_function</th>
      <td><p>Crop Model wrapper function to use.</p></td>
    </tr>
    <tr>
      <th>model_options</th>
      <td><p>List of options for the Crop Model wrapper (see help of
the Crop Model wrapper function used).</p></td>
    </tr>
    <tr>
      <th>optim_method</th>
      <td><p>Name of the parameter estimation method to use (optional,
see default value in the function signature). For the moment, can be "simplex"
or "dreamzs". See <a href='https://sticsrpacks.github.io/CroptimizR/articles/Available_parameter_estimation_algorithms.html'>here</a>
for a brief description and references on the available methods.</p></td>
    </tr>
    <tr>
      <th>optim_options</th>
      <td><p>List of options of the parameter estimation method.
<code>path_results</code> The path where to store the results (optional, default=getwd())
Click on the links to see the specific options for the <a href='https://sticsrpacks.github.io/CroptimizR/articles/Parameter_estimation_simple_case.html'>simplex</a>
and <a href='https://sticsrpacks.github.io/CroptimizR/articles/Parameter_estimation_DREAM.html'>DreamZS</a> methods.</p></td>
    </tr>
    <tr>
      <th>param_info</th>
      <td><p>Information on the parameters to estimate.
Either
a list containing:</p><ul>
<li><p>(named) vectors of upper and lower bounds (<code>ub</code> and <code>lb</code>) (-Inf and Inf can be used),</p></li>
<li><p><code>init_values</code>, A data.frame containing initial
values to test for the parameters (optional, if not provided, or if less values
than number of repetitions of the minimization are provided), the, or part
of the, initial values will be randomly generated using LHS sampling within
parameter bounds).</p></li>
</ul>

<p>or
a named list containing for each parameter the list of situations per group
(<code>sit_list</code>), the vector of upper and lower bounds (one value per group)
(<code>ub</code> and <code>lb</code>) and the list of initial values per group
<code>init_values</code> (data.frame, one column per group, optional).
(see <a href='https://sticsrpacks.github.io/CroptimizR/articles/Parameter_estimation_Specific_and_Varietal.html'>here</a>
for an example)</p></td>
    </tr>
    <tr>
      <th>transform_obs</th>
      <td><p>User function for transforming observations before each criterion
evaluation (optional), see details section for more information</p></td>
    </tr>
    <tr>
      <th>transform_sim</th>
      <td><p>User function for transforming simulations before each criterion
evaluation  (optional), see details section for more information</p></td>
    </tr>
    <tr>
      <th>satisfy_par_const</th>
      <td><p>User function for including constraints on estimated
parameters (optional), see details section for more information</p></td>
    </tr>
    <tr>
      <th>var_names</th>
      <td><p>(optional) List of variables for which the wrapper must return results.
By default the wrapper is asked to simulate only the observed variables. However,
it may be useful to simulate also other variables, typically when transform_sim
and/or transform_obs functions are used. Note however that it is active only if
the model_function used handles this argument.</p></td>
    </tr>
    </table>
    
    <h2 class="hasAnchor" id="value"><a class="anchor" href="#value"></a>Value</h2>

    <p>prints, graphs and a list containing the results of the parameter estimation,
which content depends on the method used, all that saved in the defined in
<code>optim_options.path_results</code></p>
    
    <h2 class="hasAnchor" id="details"><a class="anchor" href="#details"></a>Details</h2>

    <p>The optional argument <code>transform_obs</code> must be a function with 4 arguments:
o model_results: the list of simulated results returned by the mode_wrapper used
o obs_list: the list of observations as given to estim_param function
o param_values: a named vector containing the current parameters values proposed
by the estimation algorithm
o model_options: the list of model options as given to estim_param function
It must return a list of observations (same format as <code>obs_list</code> argument) that
will be used to compute the criterion to optimize.</p>
<p>The optional argument <code>transform_sim</code> must be a function with 4 arguments:
o model_results: the list of simulated results returned by the mode_wrapper used
o obs_list: the list of observations as given to estim_param function
o param_values: a named vector containing the current parameters values proposed
by the estimation algorithm
o model_options: the list of model options as given to estim_param function
It must return a list of simulated results (same format as this returned by the model wrapper used)
that will be used to compute the criterion to optimize.</p>
<p>The optional argument <code>satisfy_par_const</code> must be a function with 2 arguments:
o param_values: a named vector containing the current parameters values proposed
by the estimation algorithm
o model_options: the list of model options as given to estim_param function
It must return a logical indicating if the parameters values satisfies the constraints
(freely defined by the user in the function body) or not.</p>
    
    <h2 class="hasAnchor" id="see-also"><a class="anchor" href="#see-also"></a>See also</h2>

    <div class='dont-index'><p>For more detail and examples, see the different vignettes in
<a href='https://sticsrpacks.github.io/CroptimizR/'>CroptimizR website</a></p></div>
    

  </div>
  <div class="col-md-3 hidden-xs hidden-sm" id="sidebar">
    <h2>Contents</h2>
    <ul class="nav nav-pills nav-stacked">
      <li><a href="#arguments">Arguments</a></li>
      
      <li><a href="#value">Value</a></li>

      <li><a href="#details">Details</a></li>

      <li><a href="#see-also">See also</a></li>
          </ul>

  </div>
</div>

      <footer>
      <div class="copyright">
  <p>Developed by Samuel Buis, Michel Giner, Patrice Lecharpentier, SticsRpacks.</p>
</div>

<div class="pkgdown">
  <p>Site built with <a href="https://pkgdown.r-lib.org/">pkgdown</a> 1.3.0.</p>
</div>
      </footer>
   </div>

  

  </body>
</html>

